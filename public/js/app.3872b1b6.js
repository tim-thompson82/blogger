(function(t){function e(e){for(var o,i,l=e[0],n=e[1],c=e[2],d=0,g=[];d<l.length;d++)i=l[d],s[i]&&g.push(s[i][0]),s[i]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);u&&u(e);while(g.length)g.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,l=1;l<a.length;l++){var n=a[l];0!==s[n]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},s={app:0},r=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=n;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("64a9"),s=a.n(o);s.a},"1a63":function(t,e,a){"use strict";var o=a("85db"),s=a.n(o);s.a},2044:function(t,e,a){},"3cb6":function(t,e,a){t.exports=a.p+"img/blogger-logo.99e135dd.png"},"56d7":function(t,e,a){"use strict";a.r(e);var o=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navigation"),a("div",{staticClass:"container-fluid"},[a("router-view")],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"navigation w-100 mb-4"},[o("div",{staticClass:"col d-flex justify-content-between align-items-center"},[o("div",{staticClass:"action muted m-1",on:{click:function(e){return t.$router.push({name:"home"})}}},[o("img",{attrs:{src:a("3cb6"),alt:"logo",height:"100"}})]),t.title?o("h1",{staticClass:"action nav-title",attrs:{"data-toggle":"toggle","data-placement":"top",title:"Back to Home"}},[t._v("Blogger")]):t._e()])])},l=[],n=a("3d20"),c=a.n(n),u={name:"navigation",data(){return{open:!1,links:[{name:"Home",routeName:"home",class:""},{name:"Playlists",routeName:"playlists",class:""},{name:"Documentation",routeName:"documentation",class:" order-1"}]}},computed:{title(){return this.$route.name},baseURL(){return this.$store.state.baseURL||"//localhost:3000/api"}},methods:{setBaseURL(){c.a.fire({title:"Change your server address?",text:"Note: The url will be formatted for you. Just provide the port number.",input:"number",inputAutoTrim:!0,showCancelButton:!0,inputPlaceholder:"e.g., 3000",preConfirm:t=>{t&&(this.$store.dispatch("setBaseURL",t),setTimeout(()=>this.$store.dispatch("cstmAlrt",{method:"toast",title:"Port Updated"}),100))}})}},components:{}},d=u,g=(a("9028"),a("2877")),m=Object(g["a"])(d,i,l,!1,null,null,null),f=m.exports,p={name:"App",components:{Navigation:f}},b=p,h=(a("034f"),Object(g["a"])(b,s,r,!1,null,null,null)),_=h.exports,y=a("8c4f"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home row justify-content-center"},[a("div",{staticClass:"col-11"},[a("form",[a("div",{staticClass:"d-flex align-items-center"},[t.query.length?a("i",{staticClass:"action muted fa fa-fw fa-times",on:{click:function(e){t.query=""}}}):t._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"__query w-100",attrs:{autofocus:"",placeholder:"search...",required:"",name:"query",type:"text"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})])]),t.results.length?a("div",{staticClass:"row"},t._l(t.results,function(e){return a("blog-card",{key:e._id,attrs:{blog:e},on:{setQuery:t.setQuery}})}),1):t._e()]),a("div",{staticClass:"__fab"},[a("input",{staticClass:"__fab_toggle",attrs:{type:"checkbox",name:"__fab_toggle"}}),t._m(0),a("div",{staticClass:"__fab_buttons"},[a("a",{staticClass:"text-white action d-flex align-items-center justify-content-center",attrs:{title:"Add Blog"},on:{click:t.createBlog}},[a("i",{staticClass:"fa fa-plus-circle"})]),a("a",{staticClass:"text-white action d-flex align-items-center justify-content-center",attrs:{title:"Run Tests"},on:{click:t.runTests}},[a("i",{staticClass:"fa fa-clipboard"})])])])])},w=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"__fab_button action"},[a("i",{staticClass:"fa fa-cog"})])}],C=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"blog-container",style:{width:t.full?"90%":"50rem"}},[o("div",{staticClass:"blog-header"},[o("div",{staticClass:"blog-cover",style:{"background-image":"url("+t.blog.img+")"}},[o("div",{staticClass:"blog-author"},[o("h3",[t._v(t._s(t.blog.author.name))])])])]),o("div",{staticClass:"blog-body",style:{width:t.full?"95%":"80%"}},[o("div",{staticClass:"blog-title mt-1"},[o("h1",[o("router-link",{attrs:{to:{name:"blog",params:{slug:t.blog.slug||t.blog._id}}}},[t._v(t._s(t.blog.title))])],1),t.full?o("hr"):t._e()]),o("div",{staticClass:"blog-summary"},[o("p",[t._v(t._s(t.blog.summary))]),t.full?o("p",{domProps:{innerHTML:t._s(t.blog.body)}}):t._e()]),o("div",{staticClass:"blog-tags"},[o("ul",t._l(t.blog.tags,function(e){return o("li",{key:e},[o("a",{staticClass:"action",on:{click:function(a){return t.$emit("setQuery",e)}}},[t._v(t._s(e))])])}),0)])]),o("div",{staticClass:"blog-footer",style:{width:t.full?"95%":"80%"}},[o("ul",[t.blog.updatedAt?o("li",{staticClass:"published-date"},[t._v(t._s(t._f("timeago")(t.blog.updatedAt)))]):t._e(),t.full?o("li",{staticClass:"published-date"},[o("img",{attrs:{src:a("3cb6"),height:"25"}}),o("span",{staticClass:"ml-1"},[t._v(t._s(t.blog.author.name))])]):t._e()])])])},B=[],T={name:"BlogCard",props:{blog:{type:Object,required:!0},full:{type:Boolean}},filters:{timeago(t){try{let a=new Date(t);return`${a.toLocaleString()}`}catch(e){return""}}}},E=T,x=(a("1a63"),Object(g["a"])(E,C,B,!1,null,null,null)),A=x.exports,S={name:"home",data(){return{query:""}},mounted(){this.$store.dispatch("getBlogs")},computed:{blogs(){return this.$store.state.blogs},results(){if(!this.query.length)return this.blogs;let t=new RegExp(this.query,"ig");return this.blogs.filter(e=>{return!!t.test(e.title)||e.tags.includes(this.query)})}},methods:{setQuery(t){this.query=t},createBlog(){this.$store.dispatch("createBlog")},setBaseUrl(){this.$store.dispatch("setBaseURL")},runTests(){this.$store.dispatch("runTests")}},components:{Navigation:f,BlogCard:A}},I=S,$=(a("cccb"),Object(g["a"])(I,v,w,!1,null,null,null)),k=$.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"documentation row"},[t._v("\n    doc here\n")])},O=[],R={},L=Object(g["a"])(R,M,O,!1,null,null,null),N=L.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.blog._id?a("div",[t.editing?t._e():a("blog-card",{attrs:{blog:t.blog,full:!0}}),t.editing?a("div",{staticClass:"card p-3"},[a("form",{on:{submit:t.save}},[a("div",{staticClass:"form-group d-flex align-items-center"},[a("input",{attrs:{type:"file"},on:{change:function(e){return t.addImage()}}}),a("br"),a("img",{attrs:{src:t.blog.img,height:"200",alt:"Image preview..."}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"slug"}},[t._v("Slug:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.slug,expression:"slug"}],staticClass:"disabled muted form-control",attrs:{readonly:""},domProps:{value:t.slug},on:{input:function(e){e.target.composing||(t.slug=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Title:")]),a("div",{staticClass:"d-flex align-items-center"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.blog.title,expression:"blog.title",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"title",maxlength:"60"},domProps:{value:t.blog.title},on:{input:function(e){e.target.composing||t.$set(t.blog,"title",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"ml-1"},[t.blog.title?a("small",[t._v(t._s(t.blog.title.length)+"/60")]):t._e()])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Summary:")]),a("div",{staticClass:"d-flex align-items-center"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.blog.summary,expression:"blog.summary",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"title",maxlength:"120"},domProps:{value:t.blog.summary},on:{input:function(e){e.target.composing||t.$set(t.blog,"summary",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("small",{staticClass:"ml-1"},[t.blog.summary?a("small",[t._v(t._s(t.blog.summary.length)+"/120")]):t._e()])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"body"}}),a("div",{staticClass:"outline",attrs:{contenteditable:"true"},domProps:{innerHTML:t._s(t.blog.body)},on:{blur:t.setBody}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"blog-tags"},[a("ul",[t._l(t.blog.tags,function(e,o){return a("li",{key:e},[a("a",{staticClass:"action",on:{click:function(e){return t.removeTag(o)}}},[t._v(t._s(e))])])}),a("li",[a("a",{staticClass:"action",on:{click:t.addTag}},[a("i",{staticClass:"fa fa-fw fa-plus"})])])],2)])])])]):t._e(),a("div",{staticClass:"__fab"},[a("input",{staticClass:"__fab_toggle",attrs:{type:"checkbox",name:"__fab_toggle"}}),t._m(0),a("div",{staticClass:"__fab_buttons"},[t.editing?t._e():a("a",{staticClass:"text-white action d-flex align-items-center justify-content-center",attrs:{title:"Edit"},on:{click:function(e){t.editing=!0}}},[a("i",{staticClass:"fa fa-pen"})]),t.editing?a("a",{staticClass:"text-white action d-flex align-items-center justify-content-center bg-success",attrs:{title:"Set Port"},on:{click:t.save}},[a("i",{staticClass:"fa fa-upload"})]):t._e(),a("a",{staticClass:"text-white action d-flex align-items-center justify-content-center bg-danger",attrs:{title:"Set Port"},on:{click:t.deleteBlog}},[a("i",{staticClass:"fa fa-trash"})])])])],1):a("div",[t._v("LOADING.....")])},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"__fab_button action"},[a("i",{staticClass:"fa fa-cog"})])}],D=a("b747"),U=a.n(D),P={name:"Blog",data(){return{editing:!1}},mounted(){this.$store.dispatch("getBlog",this.$route.params.slug)},computed:{blog(){return this.$store.state.blog},slug(){return U()(this.blog.title,{lower:!0})}},methods:{addImage(){event.target.files;var t=event.target.files[0],e=new FileReader;e.addEventListener("load",t=>{this.blog.img=e.result},!1),t&&e.readAsDataURL(t)},setBody(){this.blog.body=event.target.innerHTML},save(){this.blog.slug=this.slug,this.$store.dispatch("saveBlog",this.blog),this.editing=!1},deleteBlog(){c.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.value&&(this.$store.dispatch("deleteBlog",this.blog._id),c.a.fire("Deleted!","Your file has been deleted.","success"),this.$router.push({name:"home"}))})},removeTag(t){this.blog.tags.splice(t,1)},addTag(){c.a.fire({title:"Add Tag",input:"text",inputAutoTrim:!0,showCancelButton:!0,inputPlaceholder:"tag",preConfirm:t=>{if(!t)return;let e=this.blog.tags.find(e=>e==t);e||this.blog.tags.push(t)}})}},components:{BlogCard:A}},G=P,Y=(a("9d5a"),Object(g["a"])(G,j,q,!1,null,null,null)),H=Y.exports;o["a"].use(y["a"]);var J=new y["a"]({routes:[{path:"/",name:"home",component:k},{path:"/documentation",name:"documentation",component:N},{path:"/article/:slug",name:"blog",component:H}]}),F=a("2f62"),Q=a("bc3a"),W=a.n(Q);function z({title:t,text:e="",type:a="success",timer:o=5500}){return c.a.fire({title:t,text:e,type:a,timer:o,showConfirmButton:!1,position:"top-right",toast:!0})}function K(t){if(!t)return z({title:"An uknown error occured",type:"error"});let e=t.message||"An error occured";if(!t.isAxiosError||!t.response)return z({title:e,type:"error"});let a=t.response.data,o=a.message?a.message:a.error?a.error:t.message;e=`${t.code} ${e}`,z({title:e,text:o,type:"error",timer:15e3})}o["a"].use(F["a"]);const V="/";let X=W.a.create({baseURL:V+"account",timeout:5e3,withCredentials:!0}),Z=W.a.create({baseURL:V+"api",timeout:5e3,withCredentials:!0});var tt=new F["a"].Store({state:{blogs:[],blog:{}},mutations:{setBlogs(t,e=[]){t.blogs=e},setBlog(t,e={}){t.blog=e},addBlog(t,e){e&&t.blogs.unshift(e)}},actions:{setBaseURL(){c.a.fire({title:"Change your server address? "+V,text:"Note: The url will be formatted for you. Just provide the port number.",input:"number",inputAutoTrim:!0,showCancelButton:!0,inputPlaceholder:"e.g., 3000",preConfirm:t=>{if(!t)return;let e="//localhost:"+t+"/api";Z.defaults.baseURL=e,localStorage.setItem("baseURL",e),setTimeout(()=>z({title:"Port Updated"}),100)}})},async getBlogs({commit:t,state:e}){try{let e=await Z.get("blogs/");t("setBlogs",e.data)}catch(a){K(a)}},async createBlog({dispatch:t,commit:e}){c.a.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue(["What is your name?","What is your blog title?"]).then(e=>{if(!e.value)throw new Error("Blog Creation Canceled");t("sendBlog",e.value)}).catch(t=>K(t))},async sendBlog({commit:t},e){try{let o={title:e[1],author:e[0],slug:U()(e[1],{lower:!0})},s=await Z.post("blogs",o);if(s.data._id)return z({title:"Blog Created"}),t("addBlog",s.data),!0}catch(a){K(a)}},async getBlog({commit:t,state:e},a){try{let e=await Z.get("blogs/"+a);e.data&&e.data&&t("setBlog",e.data)}catch(o){K(o)}},async saveBlog({dispatch:t},e){try{await Z.put("blogs/"+e._id,e);z({title:"Blog Updated"}),J.push({name:"blog",params:{slug:e.slug}})}catch(a){K(a)}},async deleteBlog({dispatch:t},e){try{await Z.delete("blogs/"+e);z({title:"Blog Removed"}),t("getBlogs")}catch(a){K(a)}},async runTests(){var t={title:"__test__blog",summary:"__a__test__summary",img:"https://bcw.blob.core.windows.net/public/images/7611997462992308",body:"__MYBODY__",slug:Math.random()},e={email:"__JIMMYTESTER@testerdata.com",name:"JIMMY TESTER",password:"Testing123!"},a={email:"__BADJIMMYTESTER__@badtesterdata.com",name:"BAD JIMMY TESTER",password:"Testing123!"};let o,s,r,i,l;try{z({title:"Testing no auth requirements",type:"info"});let t=await Z.get("blogs");if(o=t.data,!Array.isArray(o))throw new Error("Unable to get blogs when not logged in or bad data retrived when requesting blogs")}catch(n){return K(n)}z({title:"Attempting to login",type:"info"});try{localStorage.getItem("BLOGGER__BADREGISTERED")||(await X.post("register",a),localStorage.setItem("BLOGGER__BADREGISTERED","true"))}catch(n){localStorage.setItem("BLOGGER__BADREGISTERED","true")}try{await X.delete("logout")}catch(n){}try{let t=await X.get("authenticate");t.data&&(r=t.data)}catch(n){r=null}if(!r)try{let t=await X.post("login",e);t.data&&(r=t.data)}catch(n){r=null}if(!r)try{let t=await X.post("register",e);t.data||(r=t.data)}catch(n){return K({...n,response:{data:"Auth System is broken please seek assistance"}})}z({title:"Successfully logged in",type:"success"});try{z({title:"Testing Blog Creation",type:"info"});let e=await Z.post("blogs",t);s=e.data}catch(n){return K(n)}try{let t=await Z.get("blogs/"+s._id);if(s=t.data,!s)throw new Error("Unable to retrive blog by its id");if(!s.author)throw new Error("Author was not attached when blog was created");if(s.author.name!=r.name)throw new Error("Blog author was not set or not populated when requesting blog by its id")}catch(n){return K(n)}try{z({title:"Testing Blog Edit",type:"info"}),s.body="___THISISATEST___";await Z.put("blogs/"+s._id,s)}catch(n){return K(n)}try{z({title:"Testing Find BlogById",type:"info"});let t=await Z.get("blogs/"+s._id);if(!s.body==t.data.body)throw new Error("Blog FoundById but edit failed");s=t.data}catch(n){return K(n)}try{z({title:"Testing Auth Checks for edit and delete",type:"info"});await X.delete("logout"),await X.post("login",a)}catch(n){return K(n)}try{s.body="___THISSHOULDFAIL___";await Z.put("blogs/"+s._id,s);let t=await Z.get("blogs/"+s._id);if(s.body==t.data.body)return z({title:"Blog Edit is not limited to the creator",type:"error",timer:15e3})}catch(n){s.badupdate="failed"}if(!s.badupdate)return z({title:"Edit not limited to creator for blog",type:"error",timer:15e3});try{await Z.delete("blogs/"+s._id);let t=await Z.get("blogs/"+s._id);if(!t.data)return z({title:"Blog Delete is not limited to the creator",type:"error",timer:15e3})}catch(n){s.deleted="failed"}if(!s.deleted)return z({title:"Delete not limited to creator for blog",type:"error",timer:15e3});try{await X.post("login",e)}catch(n){return K(n)}try{z({title:"Testing Blog Delete",type:"info"}),await Z.delete("blogs/"+s._id)}catch(n){return K(n)}try{let t=await Z.get("blogs/"+s._id);if(t.data)return z({title:"Test Blog should of been deleted so subsequent findById should of returned nothing or failed",type:"error",timer:15e3})}catch(n){}z({title:"Testing Comments",type:"info"});try{t.body="__TEST__BLOG__WITH__COMMENTS__";let e=await Z.post("blogs",t);i=e.data;let a=await Z.post("comments",{body:"THIS__COMMENT__IS__GREAT",blogId:i._id});l=a.data;let o=await Z.put("comments/"+l._id,{body:"I__CAN__EDIT__MY__COMMENT"});if("I__CAN__EDIT__MY__COMMENT"!=o.data.body)throw new Error("Unable to edit comment")}catch(n){K(n)}try{await X.delete("logout"),await X.post("login",a);let t=await Z.post("comments",{body:"THIS__COMMENT__IS__GREAT__AS__WELL",blogId:i._id});t.data,await Z.put("comments/"+l._id,{body:"I__CAN__EDIT__MY__COMMENT"})}catch(n){l.edit="failed"}try{if("failed"!=l.edit)throw new Error("Comment Edits not locked to author")}catch(n){return K(n)}try{let t=await Z.get("blogs/"+i._id+"/comments"),e=t.data;if(!Array.isArray(e)||2!=e.length)throw new Error("Comments not returned when requesting blogs/:id/comments");if(!e[0].author.name)throw new Error("Comment authors are not populated")}catch(n){return K(n)}z({title:"All tests successfully passed Excellent Job!!!",type:"success"})}}}),et=a("9483");Object(et["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),new o["a"]({router:J,store:tt,mounted(){},render:function(t){return t(_)}}).$mount("#app")},"64a9":function(t,e,a){},"75ce":function(t,e,a){},"85db":function(t,e,a){},9028:function(t,e,a){"use strict";var o=a("2044"),s=a.n(o);s.a},"9d5a":function(t,e,a){"use strict";var o=a("75ce"),s=a.n(o);s.a},cccb:function(t,e,a){"use strict";var o=a("d563"),s=a.n(o);s.a},d563:function(t,e,a){}});
//# sourceMappingURL=app.3872b1b6.js.map